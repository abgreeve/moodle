define("core_grades/export_type_selector",["exports","core/modal_factory","core/modal_events","core/templates","core/str"],(function(_exports,_modal_factory,_modal_events,_templates,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Selector for getting the export type
   *
   * @module     core_grades/export_type_selector
   * @copyright  2021 Adrian Greeve <adrian@moodle.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_templates=_interopRequireDefault(_templates);const showModal=async e=>{e.preventDefault();let link=e.currentTarget,rawdata=link.getAttribute("data-export-types"),interthing=JSON.parse(rawdata);const modal=await buildModal(interthing);displayModal(modal,link)},buildModal=async templatecontext=>_modal_factory.default.create({title:await(0,_str.get_string)("exportgradingmethod","grading"),body:await _templates.default.render("core_grades/type_selector",templatecontext),type:_modal_factory.default.types.SAVE_CANCEL}),displayModal=async(modal,link)=>{modal.setSaveButtonText(await(0,_str.get_string)("download","grading")),modal.getRoot().on(_modal_events.default.save,(()=>{let radiobuttonnodes=document.querySelectorAll("[data-grading-method-export-type]");void 0!==radiobuttonnodes&&radiobuttonnodes.forEach((nodeitem=>{if(1==nodeitem.checked){let format=nodeitem.getAttribute("value"),url=link.getAttribute("href");link.setAttribute("href",url+"&format="+format),window.location.href=link.getAttribute("href")}}))})),modal.getRoot().on(_modal_events.default.hidden,(()=>{modal.destroy()})),modal.show()};_exports.init=()=>{document.querySelector("[data-thing]").addEventListener("click",showModal)}}));

//# sourceMappingURL=export_type_selector.min.js.map