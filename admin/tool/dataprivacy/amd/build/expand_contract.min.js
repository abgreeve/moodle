define(["jquery","core/url","core/str"],function(a,b,c){var d=a('<img alt="" src="'+b.imageUrl("t/expanded")+'"/>'),e=a('<img alt="" src="'+b.imageUrl("t/collapsed")+'"/>');return{expandCollapse:function(b,c){if(window.console.log(c),c.attr("data-plugin")){var f=c.data("plugin"),g=a('[data-plugintarget="'+f+'"]').children();g.each(function(){a(this).removeClass("hide")})}b.hasClass("hide")||b.hasClass("done")?(b.removeClass("hide"),b.addClass("visible"),b.removeClass("done"),b.attr("aria-expanded",!0),c.find(":header i.fa").removeClass("fa-plus-square"),c.find(":header i.fa").addClass("fa-minus-square"),c.find(":header img.icon").attr("src",d.attr("src"))):(b.removeClass("visible"),b.addClass("hide"),b.attr("aria-expanded",!1),c.find(":header i.fa").removeClass("fa-minus-square"),c.find(":header i.fa").addClass("fa-plus-square"),c.find(":header img.icon").attr("src",e.attr("src")))},expandCollapseAll:function(b){var f="visible"==b?"hide":"visible",g="visible"==b,h="visible"==b?"fa-plus-square":"fa-minus-square",i="visible"==b?"fa-minus-square":"fa-plus-square",j="visible"==b?d.attr("src"):e.attr("src");a("."+f).each(function(){a(this).removeClass(f),a(this).addClass(b),a(this).attr("aria-expanded",g)}),a(".tool_dataprivacy-expand-all").data("visibilityState",f),c.get_string(f,"tool_dataprivacy").then(function(b){a(".tool_dataprivacy-expand-all").html(b)})["catch"](Notification.exception),a(":header i.fa").each(function(){a(this).removeClass(h),a(this).addClass(i)}),a(":header img.icon").each(function(){a(this).attr("src",j)})},expandFilter:function(b){var c=a("api-issue"==b?'[data-compliant="false"]':".badge-notice");c.each(function(){var b=a(this).parents("[data-plugintarget]");b.removeClass("hide"),b.attr("aria-expanded",!0);var c=a(this).prev().data("component"),e=a('[data-id="'+c+'"]');e.removeClass("hide"),e.data("filtered","true");var f=b.prev();f.find(":header img.icon").attr("src",d.attr("src")),f.find(":header i.fa").removeClass("fa-plus-square"),f.find(":header i.fa").addClass("fa-minus-square")}),a('.tool_dataprivacy-element[aria-expanded="false"]').each(function(){"true"!=a(this).parent("div").data("filtered")&&a(this).parent("div").addClass("hide")}),0==c.length&&a(".tool_dataprivacy-component-count").removeClass("hide")},resetAll:function(){a('div[class="hide"]').each(function(){a(this).removeClass("hide")}),a('[data-filtered="false"]').each(function(){a(this).removeClass("hide")}),a('.tool_dataprivacy-element[aria-expanded="true"]').each(function(){a(this).addClass("hide"),a(this).attr("aria-expanded",!1);var b=a(this).prev();b.find(":header img.icon").attr("src",e.attr("src")),b.find(":header i.fa").removeClass("fa-minus-square"),b.find(":header i.fa").addClass("fa-plus-square")}),a(".tool_dataprivacy-component-count").addClass("hide")},followLink:function(b){var c=a('[data-id="'+b+'"]');c.removeClass("hide");var d=a('[data-section="'+b+'"]');d.removeClass("hide"),d.attr("aria-expanded",!0);var e=d.parents("[data-plugintarget]");e.removeClass("hide"),e.addClass("done"),e.attr("aria-expanded",!0),e.parent().removeClass("hide")},search:function(){var b=a(".tool_dataprivacy-search-box").val(),c=a("h3"),d=a("h4");d.each(function(){var c=a(this).text();if(c=c.toLowerCase(),c.indexOf(b.toLowerCase())!==-1){var d=a(this).parents("[data-plugintarget]");d.removeClass("hide"),d.attr("aria-expanded",!0),d.addClass("done"),0==a(this).data("compliant")?a(this).parent("div").parent("div").removeClass("hide"):a(this).parent("a").parent("div").parent("div").removeClass("hide")}else 0==a(this).data("compliant")?a(this).parent("div").parent("div").addClass("hide"):a(this).parent("a").parent("div").parent("div").addClass("hide")}),c.each(function(){var c=a(this).text();if(c=c.toLowerCase(),c.indexOf(b.toLowerCase())!==-1)a(this).parent("a").parent("div").parent("div").removeClass("hide");else{var d=a(this).parent("a").data("plugin"),e=!1;a('[data-plugintarget="'+d+'"]').each(function(){a(this).children().each(function(){a(this).hasClass("hide")||(e=!0)})}),e||a(this).parent("a").parent("div").parent("div").addClass("hide")}}),""==b&&c.each(function(){var b=a(this).attr("id");a('[data-plugintarget="'+b+'"]').addClass("hide"),a('[data-plugintarget="'+b+'"]').removeClass("done"),a('[data-plugintarget="'+b+'"]').attr("aria-expanded",!1)})}}});