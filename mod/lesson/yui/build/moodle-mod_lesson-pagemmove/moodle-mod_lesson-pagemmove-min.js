YUI.add("moodle-mod_lesson-pagemmove",function(e,t){function n(){n.superclass.constructor.apply(this,arguments)}var r={MAINCONTAINER:".mod_lesson_main",LESSONPAGES:".mod_lesson_pages",PAGEMODULES:".mod_lesson_page_element"},i=M.cfg.wwwroot+"/mod/lesson/ajax.php";e.namespace("M.mod_lesson").PagemMove=e.extend(n,e.Base,{initializer:function(){var t=e.all(r.PAGEMODULES),n=e.JSON.parse(this.get("lessondata"));YUI().use("dd-delegate","dd-drop-plugin",function(e){var t=new e.DD.Delegate({container:r.MAINCONTAINER,nodes:r.PAGEMODULES});t.on("drag:end",function(n){var r=t.get("currentNode");console.log(r.getXY());var s=i,o;o={method:"post",context:this,sync:!1,data:{action:"saveposition"},on:{success:function(t,n){var r,i;try{r=e.JSON.parse(n.responseText),console.log(r)}catch(s){}},failure:function(e,t){alert("something went wrong")}}},YUI().use("io-base",function(e){e.io(s,o)})})}),t.each(function(e){e.on("click",function(){console.log(e)})}),this._redraw()},_savedata:function(){console.log("saving data")},_redraw:function(){var t=e.JSON.parse(this.get("lessondata")),n=e.all(".mod_lesson_page_element")}},{NAME:"pagemMove",ATTRS:{lessondata:{value:null}}}),e.namespace("M.mod_lesson.PagemMove").init=function(e){return new n(e)}},"@VERSION@");
